<html>
<head>
</head>
<body>
	%% py table_style = 'font-family:"Trebuchet MS", Arial, Helvetica, sans-serif; border-collapse:collapse;'
	%% py th_style = "font-size:1.1em; color: #ffffff; text-align:left; background-color:#A7C942;border:1px solid #98bf21; padding: 3px 7px 2px 7px; padding-top: 5px; padding-bottom: 4px;"
	%% py td_style = "font-size:1em; border:1px solid #98bf21; padding: 3px 7px 2px 7px;"
	%% py td_alt_style = "color:#000000; background-color:#eaf2d3; font-size:1em; border:1px solid #98bf21; padding: 3px 7px 2px 7px;"
	%% py td_style = td_alt_style
	<h1>Summay</h1>
	<table border-collapse="collapse" width="100%" style="{{table_style}}">
	<tr>
		<th style="{{th_style}}"> Script name </th>
		<th style="{{th_style}}"> Status </th>
		<th style="{{th_style}}"> Time </th>
	</tr>
	%% py bool = 1
	%% for name, stats in scripts.items()
	%% if bool == 0
	%% py _curr_style = td_style
	%% py bool = 1
	%% else
	%% py _curr_style = td_alt_style
	%% py bool = 0
	%% endif
	<tr>
		<td style="{{_curr_style}}"> {{name}}  </td>
		<td style="{{_curr_style}}">
		%% if stats["result"] == "SUCCESS"
			<font color="#00ff00"> {{stats["result"]}} </font>
		%% elif stats["result"] == "FAILURE" and "Reason" in stats.keys()
			<font color="#ff0000"> {{stats["Reason"]}} </font>
		%% elif stats["result"] == "FAILURE"
			<font color="#ff0000"> {{stats["result"]}} </font>
		%% endif
		</td>
		<td style="{{_curr_style}}">
		%% if "Error" not in stats.keys()
			{{stats["timing"]["elapsed time"]}}
		%% elif 1
			The script failed to execute: No timing info
		%% endif
		</td>
	</tr>
	%% endfor
	</table>
	<h1> Details </h1>
	%% py bool = 1

	%% for name, stats in scripts.items()

	%% if "Error" not in stats.keys()

		 <h2> Details for {{name}} </h2>
		 %% for cat_name, data in stats.items()
		 <h3> {{cat_name}} </h3>
		 %% if cat_name == "Script path"
		 <table border-collapse="collapse" width="100%" style="{{table_style}}">
		 <tr>
			<td style="{{th_style}}">
			Path
			</td>
			<td style="{{td_alt_style}}">
			{{data}}
			</td>
		 </tr>
		 </table>
		 %% elif cat_name == "std"
		 <table border-collapse="collapse" width="100%" style="{{table_style}}">
		 <tr>
			<td style="{{th_style}}">
			stdout
			</td>
			<td style="{{td_alt_style}}">
                        <pre>
			{{data["out"]}}
                        </pre>
			</td>
		 </tr>
		 <tr>
			<td style="{{th_style}}">
			stderr
			</td>
			<td style="{{td_alt_style}}">
                        <pre>
			{{data["err"]}}
                        </pre>
			</td>
		</tr>
		 </table>
		 %% elif cat_name == "Number of peers"
		 <table border-collapse="collapse" width="100%" style="{{table_style}}">
		 <tr>
			<td style="{{th_style}}">
			Peer
			</td>
			<td style="{{td_alt_style}}">
			{{data}}
			</td>
		 </tr>
		 </table>
		 %% elif cat_name == "home"
		 %% for HName, HData in data.items()
			<h4> {{HName}} </h4>
			<table border-collapse="collapse" width="100%" style="{{table_style}}">
		 	<tr>
		 	   <td style="{{th_style}}">
			   home directory
		 	   </td>
		 	   <td style="{{td_style}}">
		 	   {{HData["home"]}}
		 	   </td>
			</tr>
			<tr>
		 	   <td style="{{th_style}}">
			   User name
		 	   </td>
		 	   <td style="{{td_alt_style}}">
		 	   {{HData["user"]}}
		 	   </td>
		 	</tr>
			<tr>
		 	   <td style="{{th_style}}">
			   Network name
		 	   </td>
		 	   <td style="{{td_style}}">
		 	   {{HData["network"]}}
		 	   </td>
		 	</tr>
			<tr>
		 	   <td style="{{th_style}}">
			   Network mode
		 	   </td>
		 	   <td style="{{td_alt_style}}">
		 	   {{HData["mode"]}}
		 	   </td>
		 	</tr>
			<tr>
		 	   <td style="{{th_style}}">
			   .set file
		 	   </td>
		 	   <td style="{{td_style}}">
		 	   {{HData["set"]}}
		 	   </td>
		 	</tr>
			<tr>
		 	   <td style="{{th_style}}">
			   slug.port
		 	   </td>
		 	   <td style="{{td_alt_style}}">
		 	   {{HData["conf"]["hole"]["slug.port"]}}
		 	   </td>
		 	</tr>
			<tr>
		 	   <td style="{{th_style}}">
			   slug.timeout
		 	   </td>
		 	   <td style="{{td_style}}">
		 	   {{HData["conf"]["hole"]["slug.timeout"]}}
		 	   </td>
		 	</tr>
		 	</table>
		 %% endfor
		 %% elif cat_name == "timing"
		 <table border-collapse="collapse" width="100%" style="{{table_style}}">
		 %% for Tn, Tv in data.items()
		 <tr>
			<td style="{{th_style}}">
			{{Tn}}
			</td>
			<td style="{{td_alt_style}}">
			{{Tv}}
			</td>
		 </tr>
		 %% endfor
		 </table>
		 %% elif cat_name == "environ"
		 <table border-collapse="collapse" width="100%" style="{{table_style}}">
		 %% for Tn, Tv in data.items()
		 <tr>
			<td style="{{th_style}}">
			{{Tn}}
			</td>
			<td style="{{td_alt_style}}">
			{{Tv}}
			</td>
		 </tr>
		 %% endfor
		 </table>
		 %% elif cat_name == "memory"
		 %% for pid, pid_stat in data.items()
		 <table border-collapse="collapse" width="100%" style="{{table_style}}">
		 <tr> <th> {{pid}} </th> </tr>
		 %% for type, type_stat in pid_stat.items()
		 <tr>
			<td style="{{th_style}}">
			{{type}}
			</td>
			<td style="{{td_alt_style}}">
			{{type_stat}}
			</td>
		 </tr>
		 %%endfor
		 </table>
		 %%endfor
		 %% endif
		 %% endfor
	%% endif
	%% endfor
	</table> 
	<h1> Unit Tests </h1>
	<table border-collapse="collapse" width="100%" style="{{table_style}}">
	<tr>
		<td style="{{th_style}}">
		stdout
		</td>
		<td style="{{td_style}}">
                <pre>
		{{unit_tests["stdout"]}}
                </pre>
		</td>
	</tr>
	</table>
</body>
</hmtl>
